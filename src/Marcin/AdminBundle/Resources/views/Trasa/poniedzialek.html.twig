{% extends 'MarcinAdminBundle::base.html.twig' %}
{% block stylesheets %}
{{parent()}}
 <link rel="stylesheet" type="text/css" href="{{ asset('bundles/marcinadmin/own/style.css') }}" />
<link rel="stylesheet" type="text/css" href="{{ asset('bundles/marcinadmin/own/select/css/bootstrap-select.min.css') }}" />
{% endblock %}
{% block body %}
            <section class="content-header">
          <h1>
            Pulpit
            <small>zarządzania GM</small>
          </h1>
          <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Pulpit</a></li>
            <li class="active">tutaj</li>
          </ol>
        </section>
                    {% include 'MarcinAdminBundle:Template:flashMsg.html.twig' %}
        <!-- Main content -->
        <section class="content">
            <div class="box box-default color-palette-box">
            <div class="box-header with-border">
              <h3 class="box-title"><i class="fa fa-tag"></i> Użytkownicy</h3>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="row">
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'poniedzialek' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_poniedzialek') }}">
                                Poniedziałek <span class="badge">{{ pon.count.all_pon }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'wtorek' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_wtorek') }}">
                                Wtorek <span class="badge">{{ wto.count.all_wto }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'sroda' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_sroda') }}">
                                Środa <span class="badge">{{ sro.count.all_sro }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'czwartek' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_czwartek') }}">
                                Czwartek <span class="badge">{{ czw.count.all_czw }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'piatek' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_piatek') }}">
                                Piątek <span class="badge">{{ pia.count.all_pia }}</span>
                            </a>
                        </div>    
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'tarnow' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_tarnow') }}">
                                Tarnów <span class="badge">{{ tar.count.all_tar }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'tadeusz' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_tadeusz') }}">
                                Tadeusz <span class="badge">{{ tad.count.all_tad }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'odbior' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_odbior') }}">
                                Odbiór <span class="badge">{{ odb.count.all_odb }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'salon' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_salon') }}">
                                Salon <span class="badge">{{ sal.count.all_sal }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'montaz' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_montaz') }}">
                                Montaż <span class="badge">{{ mon.count.all_mon }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-{% if trasastat == 'wysylka' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_wysylka') }}">
                                Wysyłka <span class="badge">{{ wys.count.all_wys }}</span>
                            </a>
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                           {# <a class="btn btn-block btn-{% if trasastat == 'tuchowska' %}default{% else %}primary{% endif %}" href="{{ path('marcin_admin_trasa_tuchowska') }}">#}
                           <button class="btn btn-block btn-danger"> Nieprzypisane: <span class="badge">{{ tuch.count.all_tuch }}</span></button>
                          {#  </a>#}
                        </div>
                        <div class="col-xs-4 col-md-2 col-lg-2 padding-bottom-15">
                            <a class="btn btn-block btn-danger" href="{{ path('marcin_admin_trasa_generowanie', {'trasastat': trasastat}) }}">
                                GENEROWANIE
                            </a>
                        </div>
                    </div>
                        {#<a href="{{ path('marcin_admin_trasa_generowanie', {'trasastat': trasastat}) }}" class="btn btn-primary">generowanie</a>#}
                        <div style="overflow-x: auto;">
                        <table id="example2" class="table table-bordered table-hover dataTable" role="grid">
                            <thead>
                                <tr role="row">
                                    <th <th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="id">{{ knp_pagination_sortable(pagination, 'Id', 's.id') }}</th>
                                    <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Jakie zamówienie">Jakie zam</th>
                                    <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Jakie zamówienie">Nr zam</th>
                                    <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Jakie zamówienie">produkcji</th>
                                    <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Jakie zamówienie">kwota</th>
                                    <th>trasa</th>
                                    <th>Akcja</th>
                                </tr>
                            </thead>
        
    {% for article in pagination  %}
        {% if article.dozaplaty == '0' %}<tr class="danger">{% else %}<tr>{% endif %}<td>{{ article.id }}</td> 
           <td>{{ article.jakie_zam }}</td>
           <td>{{ article.nr_user_zam }}</td>
           <td>{{ article.nrprodukcji }}</td>
           <td>{% if article.dozaplaty == '0' %}<font color="red"><b>{{ article.dozaplaty }}</b></font>{% else %}{% if article.zaplacono == '1' %}<font color="green"><b>{{ article.dozaplaty }}</b></font>{% else %}{{ article.dozaplaty }}{% endif %}{% endif %}</td>
           <td id="zmiana-trasa-{{ article.id }}">
           <select name="status_select" data-container="body" class="selectpicker" data-style="btn-primary" id="{{ path('marcin_admin_trasa_update_trasa', {'id': article.id }) }}" onchange="changeOrderTrasa('{{ article.id }}', event)">
                {% for trasy in trasa %}
                <option value="{{ trasy.nazwa }}"{% if article.trasa == trasy.nazwa %} selected="selected" {% endif %}>{{ trasy.nazwa }}</option>
                {% endfor %}
           </select>
           </td>
           <td>
               <div class="checkbox checkbox-success">
                                                <input style="flat-red" id="spr" type="checkbox" value="{{ article.id }}" onclick="changeOrderZam('{{ article.id }}', event)" {% if article.trasaok == '1' %}checked {% endif %} /><label for="checkbox1">
    </label></div>
           </td>
       </tr>
    {% endfor %}
        </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-5">
                        <div class="dataTables_info" id="example2_info" role="status" aria-live="polite">
                            Wszystkich zamówień jest: {{ pagination.getTotalItemCount }}
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="dataTables_paginate">
                            {{ knp_pagination_render(pagination, 'MarcinAdminBundle:Pagination:admin_pagination.html.twig') }}
                        </div>
                    </div>
                </div>
            </div><!-- /.box-body -->
            
          </div>

</section>
        {% endblock %}
{% block javascripts %}
    {{parent()}}
                            <script type="text/javascript">

                            function changeOrderTrasa(id, event) {
                                var order_id = id;
                                var element = event.currentTarget;
                               // var clicked = event.target;
                                var status = $(element).val();
                                var url = '{{ path('marcin_admin_trasa_update_trasa') }}';

                                $.ajax({
                                    url: url,
                                    data: {
                                        id: order_id,
                                        status: status
                                    },
                                    method: 'POST',
                                    success: function (data) {
                                                console.log(status);
                                    }
                                });

                            }

                            function changeOrderZam(id, event) {
                                var order_id = id;
                                //var username = user;
                                var element = event.currentTarget;
                                {#                                var clicked = event.target;
                                var status = $(element).val();
                                var url = '{{ path('marcin_admin_trasa_update') }}';

                                $.ajax({
                                    url: url,
                                    data: {
                                        id: order_id
                                        //status: status,
                                        //login: username
                                    },
                                    method: 'POST',
                                    success: function (data) {
                                                console.log(id);
                                    }
                                });

                            }#}
                                var clicked = event.target;
                                
                                if($(element).is(":checked")) {
             console.log('zaznaczono!');
             var zaplacono = 1;
        } else {
             console.log('odznaczono!');
             var zaplacono = 0;
        }
                                var url = '{{ path('marcin_admin_trasa_update') }}';

                                $.ajax({
                                    url: url,
                                    data: {
                                        id: order_id,
                                        zaznaczono: zaplacono
                                    },
                                    method: 'POST',
                                    success: function (data) {
                                               console.log(id);
                                                
                                    }
                                });

                            }
    </script>
    <script type="text/javascript" src="{{ asset('bundles/marcinadmin/own/select/js/bootstrap-select.min.js') }}"></script>
{% endblock %}

